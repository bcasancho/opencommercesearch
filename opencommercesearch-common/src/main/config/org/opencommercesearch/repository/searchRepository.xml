<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE gsa-template PUBLIC "-//ART Technology Group Inc," "http://www.atg.com/dtds/gsa/gsa_1.0.dtd">

<gsa-template>
    <header>
        <name>Search Repository</name>
        <author>rmerizalde</author>
        <version>1.0</version>
    </header>

    <item-descriptor display-name="Synonym List" name="synonymList" display-property="name" item-cache-size="1000" query-cache-size="100">
        <table name="cs_synonym_list" type="primary" id-column-name="syn_list_id">
          <property name="name" data-type="string" display-name="Name"
                  column-name="name" required="true">
            <attribute name="propertySortPriority" value="1" />
          </property>
        </table>
        <table name="cs_syn_list_mapping" type="multi" id-column-names="syn_list_id">
          <property name="mappings" display-name="Synonym Mappings" column-names="syn_id" data-type="set"
            component-item-type="synonym">
            <attribute name="propertySortPriority" value="2" />
          </property>
        </table>
    </item-descriptor>

    <item-descriptor display-name="Synonym" name="synonym" display-property="mapping" item-cache-size="1000" query-cache-size="100">
        <table name="cs_synonym" type="primary" id-column-name="syn_id">
            <property name="mapping" data-type="string" display-name="Mapping"
                    column-name="mapping" required="true"/>
        </table>
    </item-descriptor>

    <item-descriptor display-name="Rule" name="rule" display-property="name" item-cache-size="1000" query-cache-size="100"
        sub-type-property="ruleType" sub-type-value="rule">
      <attribute name="GeneralPriority" value="1" />
      <attribute name="TriggerPriority" value="1" />
      <attribute name="LifetimePriority" value="10" />
      <table name="cs_rule" type="primary" id-column-name="rule_id">
        <property name="ruleType" data-type="enumerated" column-name="type" hidden="false">
          <attribute name="useCodeForValue" value="false"/>
          <option value="rule"        code="0" />
          <option value="boostRule"   code="1"/>
          <option value="blockRule"   code="2"/>
          <option value="facetRule"   code="3"/>
          <option value="rankingRule" code="4"/>
        </property>

        <property name="name" data-type="string" display-name="Name"
                  column-name="name" required="false" category="General">
          <attribute name="propertySortPriority" value="1" />
        </property>
        <property name="query" data-type="string" display-name="Query"
                  column-name="query" required="false" category="Trigger">
          <attribute name="propertySortPriority" value="2" />
        </property>
        <property name="startDate" data-type="timestamp" display-name="Start Date"
            column-name="start_date" required="false" category="Lifetime">
            <attribute name="propertySortPriority" value="6" />
        </property>
        <property name="endDate" data-type="timestamp" display-name="End Date"
            column-name="end_date" required="false" category="Lifetime">
            <attribute name="propertySortPriority" value="7" />
        </property>
      </table>

      <table name="cs_rule_sites" type="multi" id-column-name="rule_id" shared-table-sequence="1">
        <property name="sites" display-name="Sites" data-type="set" component-item-type="siteConfiguration"
            column-name="site_id" repository="/atg/multisite/SiteRepository" category="Trigger">
            <attribute name="cacheReferencesById" value="true"/>
            <attribute name="propertySortPriority" value="3" />
        </property>
      </table>

      <table name="cs_rule_catalogs" type="multi" id-column-name="rule_id" shared-table-sequence="1">
        <property name="catalogs" display-name="Catalogs" data-type="set" component-item-type="catalog"
            column-name="catalog_id" repository="/atg/commerce/catalog/ProductCatalog" category="Trigger">
            <attribute name="cacheReferencesById" value="true"/>
            <attribute name="propertySortPriority" value="4" />
        </property>
       </table>

      <table name="cs_rule_cats" type="multi" id-column-name="rule_id" shared-table-sequence="1">
        <property name="categories" display-name="Categories" data-type="set" component-item-type="category"
            column-name="category_id" repository="/atg/commerce/catalog/ProductCatalog" category="Trigger">
            <attribute name="cacheReferencesById" value="true"/>
            <attribute name="propertySortPriority" value="5" />
        </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Boost Rule" name="boostRule" super-type="rule" sub-type-value="boostRule">
      <attribute name="BoostsPriority" value="4" />
      
      <table name="cs_boost_rule" type="auxiliary" id-column-names="rule_id" shared-table-sequence="1"/>

      <table name="cs_boost_rule_prods" id-column-name="rule_id" multi-column-name="seq_num" type="multi" shared-table-sequence="1">
          <property name="boostedProducts" display-name="Products" data-type="list" component-item-type="product" 
              column-name="product_id" repository="/atg/commerce/catalog/ProductCatalog" category="Boosts">
              <attribute name="cacheReferencesById" value="true"/>
          </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Block Rule" name="blockRule" super-type="rule" sub-type-value="blockRule">
      <attribute name="BlocksPriority" value="4" />

      <table name="cs_block_rule" type="auxiliary" id-column-names="rule_id" shared-table-sequence="1"/>

      <table name="cs_block_rule_prods" type="multi" id-column-name="rule_id" shared-table-sequence="1">
          <property name="blockedProducts" display-name="Products" data-type="set" component-item-type="product"
              column-name="product_id" repository="/atg/commerce/catalog/ProductCatalog" category="Blocks">
              <attribute name="cacheReferencesById" value="true"/>
          </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Facet Rule" name="facetRule" super-type="rule" sub-type-value="facetRule">
      <attribute name="FacetsPriority" value="4" />

      <table name="cs_facet_rule" type="auxiliary" id-column-names="rule_id" shared-table-sequence="1"/>

      <table name="cs_facet_rule_facets" type="multi" id-column-name="rule_id" shared-table-sequence="1">
          <property name="facets" display-name="Facets" data-type="set" component-item-type="facet"
              column-name="facet_id" category="Facets">
              <attribute name="cacheReferencesById" value="false"/>
          </property>
      </table>
    </item-descriptor>

    <!-- facets -->
    <item-descriptor display-name="Facet" name="facet" display-property="name" item-cache-size="100" query-cache-size="100"
        sub-type-property="facetType" sub-type-value="facet">
      <attribute name="GeneralPriority" value="1" />
      <attribute name="OptionalPriority" value="2" />
      <table name="cs_facet" type="primary" id-column-name="facet_id">
        <property name="facetType" data-type="enumerated" column-name="type" hidden="false">
          <attribute name="useCodeForValue" value="false"/>
          <option value="facet"      code="0"/>
          <option value="fieldFacet" code="1"/>
          <option value="rangeFacet" code="2"/>
          <option value="dateFacet"  code="3"/>
          <option value="queryFacet" code="4"/>
          <option value="pivotRule"  code="5"/>
        </property>

        <property name="name" data-type="string" display-name="Name"
                  column-name="name" required="true" category="Basic">
          <attribute name="propertySortPriority" value="1" />
        </property>
        <property name="isMultiSelect" data-type="boolean" display-name="Allow Multiple Selection"
                  column-name="is_multi_select" required="false" category="Optional">
          <attribute name="propertySortPriority" value="1" />
        </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Field Facet" name="fieldFacet" super-type="facet" sub-type-value="fieldFacet">
      <attribute name="AdvancedPriority" value="3" />
      <table name="cs_field_facet" type="auxiliary" id-column-names="facet_id" shared-table-sequence="1">
        <property name="fieldName" data-type="string" display-name="Field Name"
                  column-name="field_name" required="true" category="Basic">
          <attribute name="propertySortPriority" value="2" />
        </property>
        <property name="sort" data-type="enumerated" column-name="sort" required="false" hidden="false"
                  display-name="Sort by (default count)" category="Optional">
          <attribute name="useCodeForValue" value="false"/>
          <option value="count" code="0" />
          <option value="index" code="1"/>
          <attribute name="propertySortPriority" value="2" />
        </property>
        <property name="limit" data-type="int" display-name="Max Buckets (default 100)"
                  column-name="limit" required="false" category="Optional">
          <attribute name="propertySortPriority" value="3" />
        </property>
        <property name="minCount" data-type="int" display-name="Min Count per Bucket (default 0)"
                  column-name="min_count" required="false" category="Optional">
          <attribute name="propertySortPriority" value="4" />
        </property>
        <property name="missing" data-type="boolean" display-name="Display 'Missing' Bucket (default false)"
                  column-name="missing" required="false" category="Optional">
          <attribute name="propertySortPriority" value="5" />
        </property>
        <property name="facetPrefix" data-type="string" display-name="Prefix"
                  column-name="prefix" required="false" category="Advanced">
          <attribute name="propertySortPriority" value="1" />
        </property>
        <property name="facetMethod" data-type="enumerated" column-name="method" required="false" hidden="false" display-name="Method" category="Advanced">
          <attribute name="useCodeForValue" value="false"/>
          <option value="enum" code="0" />
          <option value="fc" code="1"/>
          <attribute name="propertySortPriority" value="2" />
        </property>
        <property name="minDocumentFrequency" data-type="int" display-name="Min Document Frequency (enum cache)"
                  column-name="min_df" required="false" category="Advanced">
          <attribute name="propertySortPriority" value="3" />
        </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Range Facet" name="rangeFacet" super-type="facet" sub-type-value="rangeFacet">
      <attribute name="AdvancedPriority" value="3" />
      <table name="cs_range_facet" type="auxiliary" id-column-names="facet_id" shared-table-sequence="1">
        <property name="fieldName" data-type="string" display-name="Field Name"
                  column-name="field_name" required="true" category="Basic">
          <attribute name="propertySortPriority" value="2" />
        </property>
        <property name="start" data-type="int" display-name="Range Start"
                  column-name="range_start" required="true" category="Basic">
          <attribute name="propertySortPriority" value="3" />
        </property>
        <property name="end" data-type="int" display-name="Range End"
                  column-name="range_end" required="false" category="Basic">
          <attribute name="propertySortPriority" value="4" />
        </property>
        <property name="gap" data-type="int" display-name="Range Gap"
                  column-name="range_gap" required="true" category="Basic">
          <attribute name="propertySortPriority" value="5" />
        </property>
        <property name="hardened" data-type="boolean" display-name="Hardened (default false)"
                  column-name="hardened" required="true" category="Optional">
          <attribute name="propertySortPriority" value="1" />
        </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Date Facet" name="dateFacet" super-type="facet" sub-type-value="dateFacet">
      <attribute name="AdvancedPriority" value="3" />
      <table name="cs_date_facet" type="auxiliary" id-column-names="facet_id" shared-table-sequence="1">
        <property name="fieldName" data-type="string" display-name="Field Name"
                  column-name="field_name" required="true" category="Basic">
          <attribute name="propertySortPriority" value="2" />
        </property>
        <property name="start" data-type="timestamp" display-name="Range Start"
                  column-name="range_start" required="true" category="Basic">
          <attribute name="propertySortPriority" value="3" />
        </property>
        <property name="end" data-type="timestamp" display-name="Range End"
                  column-name="range_end" required="true" category="Basic">
          <attribute name="propertySortPriority" value="4" />
        </property>
        <property name="gap" data-type="string" display-name="Range Gap"
                  column-name="range_gap" required="true" category="Basic">
          <attribute name="propertySortPriority" value="5" />
        </property>
        <property name="hardened" data-type="boolean" display-name="Hardened (default false)"
                  column-name="hardened" required="false" category="Optional">
          <attribute name="propertySortPriority" value="1" />
        </property>
      </table>
    </item-descriptor>

    <item-descriptor display-name="Query Facet" name="queryFacet" super-type="facet" sub-type-value="queryFacet">
      <attribute name="AdvancedPriority" value="3" />
      <table name="cs_query_facet" type="auxiliary" id-column-names="facet_id" shared-table-sequence="1">
        <property name="fieldName" data-type="string" display-name="Field Name"
                  column-name="field_name" required="true" category="Basic">
          <attribute name="propertySortPriority" value="2" />
        </property>
      </table>

      <table name="cs_query_facet_queries" id-column-name="facet_id" multi-column-name="seq_num" type="multi" shared-table-sequence="1">
          <property name="queries" display-name="Queries" data-type="list" component-data-type="string"
              column-name="query">
              <attribute name="cacheReferencesById" value="false"/>
          </property>
      </table>
    </item-descriptor>  

</gsa-template>    

